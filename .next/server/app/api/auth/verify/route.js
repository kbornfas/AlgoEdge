"use strict";(()=>{var e={};e.id=571,e.ids=[571],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},38280:(e,r,i)=>{i.r(r),i.d(r,{originalPathname:()=>x,patchFetch:()=>h,requestAsyncStorage:()=>c,routeModule:()=>d,serverHooks:()=>v,staticGenerationAsyncStorage:()=>f});var t={};i.r(t),i.d(t,{GET:()=>p,POST:()=>l});var n=i(49303),a=i(88716),o=i(60670),s=i(87070),u=i(20728);async function l(e){try{let{token:r}=await e.json();if(!r)return s.NextResponse.json({error:"Verification token is required"},{status:400});let i=await u._.user.findFirst({where:{verificationToken:r,verificationExpires:{gt:new Date}}});if(!i)return s.NextResponse.json({error:"Invalid or expired verification token"},{status:400});return await u._.user.update({where:{id:i.id},data:{isVerified:!0,verificationToken:null,verificationExpires:null}}),s.NextResponse.json({message:"Email verified successfully"})}catch(e){return console.error("Verification error:",e),s.NextResponse.json({error:"Email verification failed. Please try again."},{status:500})}}async function p(e){try{let{searchParams:r}=new URL(e.url),i=r.get("token");if(!i)return s.NextResponse.json({error:"Verification token is required"},{status:400});let t=await u._.user.findFirst({where:{verificationToken:i,verificationExpires:{gt:new Date}}});if(!t)return s.NextResponse.json({error:"Invalid or expired verification token"},{status:400});return await u._.user.update({where:{id:t.id},data:{isVerified:!0,verificationToken:null,verificationExpires:null}}),s.NextResponse.redirect(new URL("/auth/login?verified=true",e.url))}catch(r){return console.error("Verification error:",r),s.NextResponse.redirect(new URL("/auth/login?error=verification_failed",e.url))}}let d=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/auth/verify/route",pathname:"/api/auth/verify",filename:"route",bundlePath:"app/api/auth/verify/route"},resolvedPagePath:"/home/runner/work/AlgoEdge/AlgoEdge/src/app/api/auth/verify/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:c,staticGenerationAsyncStorage:f,serverHooks:v}=d,x="/api/auth/verify/route";function h(){return(0,o.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:f})}},20728:(e,r,i)=>{i.d(r,{_:()=>n});let t=require("@prisma/client"),n=global.prisma||new t.PrismaClient({log:["error"]})}};var r=require("../../../../webpack-runtime.js");r.C(e);var i=e=>r(r.s=e),t=r.X(0,[8948,5972],()=>i(38280));module.exports=t})();