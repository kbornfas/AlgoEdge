(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[716],{4935:function(e,t,n){Promise.resolve().then(n.bind(n,1202))},1202:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var r=n(7437),a=n(2265),s=n(1899),o=n(9978),i=n(7208),l=n(6137),d=n(5002),c=n(2279),u=n(8811),h=n(3996),x=n(9832),m=n(7312),p=n(4013),f=n(5389),g=n(7769),b=n(2208),j=n(7648),y=n(9376);function Z(){let e=(0,y.useRouter)(),[t,n]=(0,a.useState)({email:"",password:"",twoFactorCode:""}),[Z,w]=(0,a.useState)(!1),[v,C]=(0,a.useState)(!1),[S,k]=(0,a.useState)(!1),[F,W]=(0,a.useState)(""),E=e=>{n({...t,[e.target.name]:e.target.value}),W("")},N=async n=>{n.preventDefault(),k(!0),W("");try{let n=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.email,password:t.password,...v&&{twoFactorCode:t.twoFactorCode}})}),r=await n.json();if(!n.ok){r.requires2FA?(C(!0),W("")):W(r.error||"Login failed");return}localStorage.setItem("token",r.token),localStorage.setItem("user",JSON.stringify(r.user)),e.push("/dashboard")}catch(e){W("Network error. Please try again.")}finally{k(!1)}};return(0,r.jsx)(s.Z,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"background.default",py:4},children:(0,r.jsx)(o.Z,{maxWidth:"sm",children:(0,r.jsx)(i.Z,{children:(0,r.jsxs)(l.Z,{sx:{p:4},children:[(0,r.jsx)(d.Z,{variant:"h4",align:"center",gutterBottom:!0,sx:{fontWeight:600},children:"Welcome Back"}),(0,r.jsx)(d.Z,{variant:"body2",align:"center",color:"text.secondary",sx:{mb:4},children:"Sign in to your AlgoEdge account"}),F&&(0,r.jsx)(c.Z,{severity:"error",sx:{mb:3},children:F}),(0,r.jsxs)(s.Z,{component:"form",onSubmit:N,children:[(0,r.jsx)(u.Z,{fullWidth:!0,label:"Email",name:"email",type:"email",value:t.email,onChange:E,required:!0,disabled:S,sx:{mb:2}}),(0,r.jsx)(u.Z,{fullWidth:!0,label:"Password",name:"password",type:Z?"text":"password",value:t.password,onChange:E,required:!0,disabled:S,sx:{mb:2},InputProps:{endAdornment:(0,r.jsx)(h.Z,{position:"end",children:(0,r.jsx)(x.Z,{onClick:()=>w(!Z),edge:"end",children:Z?(0,r.jsx)(g.Z,{size:20}):(0,r.jsx)(b.Z,{size:20})})})}}),v&&(0,r.jsx)(u.Z,{fullWidth:!0,label:"2FA Code",name:"twoFactorCode",value:t.twoFactorCode,onChange:E,required:!0,disabled:S,placeholder:"Enter 6-digit code",sx:{mb:2},inputProps:{maxLength:6}}),(0,r.jsx)(s.Z,{sx:{display:"flex",justifyContent:"flex-end",mb:3},children:(0,r.jsx)(m.Z,{component:j.default,href:"/auth/reset-password",variant:"body2",underline:"hover",children:"Forgot password?"})}),(0,r.jsx)(p.Z,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:S,sx:{mb:2},children:S?(0,r.jsx)(f.Z,{size:24}):"Sign In"}),(0,r.jsxs)(d.Z,{variant:"body2",align:"center",color:"text.secondary",children:["Don't have an account?"," ",(0,r.jsx)(m.Z,{component:j.default,href:"/auth/register",underline:"hover",children:"Sign up"})]})]})]})})})})}}},function(e){e.O(0,[438,839,299,981,858,971,117,744],function(){return e(e.s=4935)}),_N_E=e.O()}]);